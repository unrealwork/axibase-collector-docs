<list>
  <com.axibase.collector.model.job.json.JsonJobConfig>
    <name>nginx-plus-statistics</name>
    <cronExpression>0/5 * * * * ?</cronExpression>
    <enabled>true</enabled>
    <jobType>JSON</jobType>
    <defaultTags/>
    <checkLastTime>false</checkLastTime>
    <commitInterval>10</commitInterval>
    <errorThreshold>0</errorThreshold>
    <configurations>
      <com.axibase.collector.model.job.json.JsonConfiguration>
        <name>nginx-plus-status</name>
        <path>http://${ITEM}/status</path>
        <entitySet>
          <name>nginx-plus-servers</name>
          <type>TEXT</type>
          <discardDuplicates>false</discardDuplicates>
          <entities>
            <string>demo.nginx.com</string>
          </entities>
        </entitySet>
        <enableWebDriver>false</enableWebDriver>
        <driverTimeout>0</driverTimeout>
        <driverFileEncoding>UTF8</driverFileEncoding>
        <settings>
          <com.axibase.collector.model.job.json.JsonConfigurationSetting>
            <jsonPath>$</jsonPath>
            <depth>2</depth>
            <defaultEntity>${HOST}</defaultEntity>
            <customTags/>
            <renamedFields/>
            <timeEnabled>true</timeEnabled>
            <timeField>$.timestamp</timeField>
            <timeFormat>milliseconds</timeFormat>
            <seriesEnabled>true</seriesEnabled>
            <metricPrefix>nginx-plus.</metricPrefix>
            <includedFields/>
            <excludedFields>
              <string>timestamp</string>
              <string>nginx_version</string>
              <string>pid</string>
              <string>load_timestamp</string>
              <string>generation</string>
              <string>version</string>
            </excludedFields>
            <propertyEnabled>true</propertyEnabled>
            <propertyDefaultType>nginx_info</propertyDefaultType>
            <propertyKeyFields>
              <string>address</string>
            </propertyKeyFields>
            <propertyValueFields>
              <string>nginx_version</string>
              <string>pid</string>
              <string>load_timestamp</string>
              <string>generation</string>
              <string>version</string>
            </propertyValueFields>
            <messageEnabled>false</messageEnabled>
            <messageTagFields/>
          </com.axibase.collector.model.job.json.JsonConfigurationSetting>
          <com.axibase.collector.model.job.json.JsonConfigurationSetting>
            <jsonPath>$..peers.*</jsonPath>
            <depth>2</depth>
            <defaultEntity>${HOST}</defaultEntity>
            <customTags>
              <entry>
                <string>upstream</string>
                <string>${PARENT(2)}</string>
              </entry>
              <entry>
                <string>type</string>
                <string>${PARENT(4)}.${PARENT(3)}.${PARENT(1)}</string>
              </entry>
            </customTags>
            <renamedFields/>
            <timeEnabled>true</timeEnabled>
            <timeField>$.timestamp</timeField>
            <timeFormat>milliseconds</timeFormat>
            <seriesEnabled>true</seriesEnabled>
            <metricPrefix>nginx-plus.</metricPrefix>
            <includedFields/>
            <excludedFields>
              <string>id</string>
              <string>weight</string>
            </excludedFields>
            <propertyEnabled>true</propertyEnabled>
            <propertyDefaultType>${PARENT(4)}.${PARENT(3)}.${PARENT(1)}</propertyDefaultType>
            <propertyKeyFields>
              <string>server</string>
            </propertyKeyFields>
            <propertyValueFields>
              <string>id</string>
              <string>weight</string>
              <string>state</string>
              <string>last_passed</string>
              <string>backup</string>
            </propertyValueFields>
            <messageEnabled>false</messageEnabled>
            <messageTagFields/>
          </com.axibase.collector.model.job.json.JsonConfigurationSetting>
          <com.axibase.collector.model.job.json.JsonConfigurationSetting>
            <jsonPath>$[&apos;caches&apos;|&apos;server_zones&apos;|&apos;upstreams&apos;].*</jsonPath>
            <depth>2</depth>
            <defaultEntity>${HOST}</defaultEntity>
            <customTags>
              <entry>
                <string>name</string>
                <string>${PARENT}</string>
              </entry>
              <entry>
                <string>type</string>
                <string>${PARENT(2)}</string>
              </entry>
            </customTags>
            <renamedFields/>
            <timeEnabled>true</timeEnabled>
            <timeField>$.timestamp</timeField>
            <timeFormat>milliseconds</timeFormat>
            <seriesEnabled>true</seriesEnabled>
            <metricPrefix>nginx-plus.</metricPrefix>
            <includedFields/>
            <excludedFields>
              <string>revalidated</string>
              <string>expired</string>
              <string>cold</string>
              <string>hit</string>
              <string>bypass</string>
              <string>peers</string>
              <string>updating</string>
              <string>max_size</string>
              <string>miss</string>
              <string>stale</string>
              <string>size</string>
            </excludedFields>
            <propertyEnabled>true</propertyEnabled>
            <propertyDefaultType>${PARENT(2)}</propertyDefaultType>
            <propertyKeyFields/>
            <propertyValueFields>
              <string>cold</string>
              <string>name</string>
              <string>max_size</string>
              <string>size</string>
            </propertyValueFields>
            <messageEnabled>false</messageEnabled>
            <messageTagFields/>
          </com.axibase.collector.model.job.json.JsonConfigurationSetting>
          <com.axibase.collector.model.job.json.JsonConfigurationSetting>
            <jsonPath>$[&apos;stream&apos;][&apos;server_zones&apos;].*</jsonPath>
            <depth>2</depth>
            <defaultEntity>${HOST}</defaultEntity>
            <customTags>
              <entry>
                <string>name</string>
                <string>${PARENT}</string>
              </entry>
              <entry>
                <string>type</string>
                <string>stream.${PARENT(2)}</string>
              </entry>
            </customTags>
            <renamedFields/>
            <timeEnabled>true</timeEnabled>
            <timeField>$.timestamp</timeField>
            <timeFormat>milliseconds</timeFormat>
            <seriesEnabled>true</seriesEnabled>
            <metricPrefix>nginx-plus.</metricPrefix>
            <includedFields/>
            <excludedFields/>
            <propertyEnabled>false</propertyEnabled>
            <propertyDefaultType>${PARENT(2)}</propertyDefaultType>
            <propertyKeyFields/>
            <propertyValueFields/>
            <messageEnabled>false</messageEnabled>
            <messageTagFields/>
          </com.axibase.collector.model.job.json.JsonConfigurationSetting>
          <com.axibase.collector.model.job.json.JsonConfigurationSetting>
            <jsonPath>$[&apos;caches&apos;].*.*</jsonPath>
            <depth>2</depth>
            <defaultEntity>${HOST}</defaultEntity>
            <customTags>
              <entry>
                <string>name</string>
                <string>${PARENT(2)}</string>
              </entry>
              <entry>
                <string>cache_status</string>
                <string>${PARENT}</string>
              </entry>
              <entry>
                <string>type</string>
                <string>caches</string>
              </entry>
            </customTags>
            <renamedFields/>
            <timeEnabled>true</timeEnabled>
            <timeField>$.timestamp</timeField>
            <timeFormat>milliseconds</timeFormat>
            <seriesEnabled>true</seriesEnabled>
            <metricPrefix>nginx-plus.</metricPrefix>
            <includedFields/>
            <excludedFields/>
            <propertyEnabled>true</propertyEnabled>
            <propertyDefaultType>${PARENT(2)}</propertyDefaultType>
            <propertyKeyFields/>
            <propertyValueFields/>
            <messageEnabled>false</messageEnabled>
            <messageTagFields/>
          </com.axibase.collector.model.job.json.JsonConfigurationSetting>
        </settings>
      </com.axibase.collector.model.job.json.JsonConfiguration>
    </configurations>
  </com.axibase.collector.model.job.json.JsonJobConfig>
</list>
